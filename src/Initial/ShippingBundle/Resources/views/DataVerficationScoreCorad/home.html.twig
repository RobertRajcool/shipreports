{% extends templatechoosen %}
{% block body %}

    {% block javascripts %}

        {% javascripts '@InitialShippingBundle/Resources/public/js/aa_jquery-1.8.0.min.js' %}
        <script src="{{ asset_url }}"></script>
        {% endjavascripts %}

        <script>
            $(document).ready(function () {
                $('#updatebuttonid').hide();
                var base_url = window.location.origin;
                $('#nogroupselected').hide();
                $('#kpiformforship').show();
                var shipid = '{{ currentshipid }}';
                var shipname = '{{ currentshipname }}';
                var statusofship = '{{ statuscount }}';
                var shipcount = '{{ shipcount }}';
                var role = '{{ app.user.roles[0] }}';
                var currentdatetime = '{{ currentdatetime }}';

                if (statusofship == shipcount) {
                    $('#allbuttondiv').hide();
                    $('#upload_btn_id').show();
                    $('#shipid').val('');
                    $('#shipname').text('');
                } else {
                    $('#' + shipid).addClass('active');
                    $('#shipid').val(shipid);
                    $('#shipname').text(shipname);
                    $('#allbuttondiv').show();
                    $('#upload_btn_id').hide();
                }


                var nowdate = new Date(currentdatetime),
                        locale = "en-us",
                        month = nowdate.toLocaleString(locale, {month: "long"}),
                        year = nowdate.getFullYear();

                $('#currentid').text(month + '-' + year);
                $('#currentid_data').text(month + '-' + year);
                $('#datofmonthid').val(currentdatetime);
                $('#datofmonthid_data').val(currentdatetime);
                $('#spantext').hide();
                $('#previousmonthdata').hide();
                /*------------------------------------- Previous Month Dataview Starts Here-------------------------------------------- */
                $('.prevmonth').live('click', function ($e) {
                    $e.preventDefault();
                    var linkid = $(this).attr('id');
                    if (linkid == 'proviousmonth_data') {

                        var currentdate = new Date($('#datofmonthid_data').val());
                    }
                    else {
                        var currentdate = new Date($('#datofmonthid').val());
                    }

                    currentdate.setMonth(currentdate.getMonth() - 1);
                    currentdate, locale = "en-us",
                            month = currentdate.toLocaleString(locale, {month: "long"}),
                            year = currentdate.getFullYear();

                    var current = month + '-' + year;
                    var data = {
                        dataofmonth: current
                    };

                    $.ajaxSetup({
                        global: false,
                        type: "post",
                        'url': Routing.generate('prev_month_change_scorecard'),
                        beforeSend: function () {
                            var beforsend = ajaxbefore_send();
                        },
                        complete: function () {
                            var complete = ajax_complete();
                        }
                    });
                    $.ajax({
                        data: data,
                        success: function (data) {
                            if (data.commontext == true) {
                                $('#prvieoustablecontent').html(' ');
                                $('#prvieoustablecontent').text(' ');
                                var addcolumn = 0;
                                var valuecount = 0;
                                $('<table id="table_id_" class="table verfication_ranking_table_form_section"></table>').appendTo('#prvieoustablecontent');
                                $('<thead id="firsttable_head_"></thead><tbody id="firsttable_body_"></tbody>').appendTo('#table_id_');
                                $('<tr class="v_r_min_height" id="firsttable_head_tr_"></tr>').appendTo('#firsttable_head_');
                                $('<th class="kpi_lement_name"></th><th class="kpi_weightage"><div class="verfication_ranking_text_rotation_2">Weightage</div></th>').appendTo('#firsttable_head_tr_');
                                $.each(data.listofships, function (j) {
                                    $('<th class="kpi_ship "><div class="verfication_ranking_text_rotation_2">' + data.listofships[j]['shipName'] + '</div></th>').appendTo('#firsttable_head_tr_');
                                });
                                $.each(data.rankingKpiList, function (i) {

                                    var colspan = data.shipcount + 2;
                                    $('<table id="table_id_' + i + '" class="table verfication_ranking_table_form_section"></table>').appendTo('#prvieoustablecontent');
                                    $('<thead id="firsttable_head_' + i + '"></thead><tbody id="firsttable_body_' + i + '"></tbody>').appendTo('#table_id_' + i);
                                    $('<tr id="firsttable_head_tr_' + i + '"></tr>').appendTo('#firsttable_head_' + i);
                                    $('<th colspan="' + colspan + '" class="kpi_lement_name">' + data.rankingKpiList[i]['kpiName'] + '</th>').appendTo('#firsttable_head_tr_' + i);
                                    var kpiid = data.rankingKpiList[i]['id'];
                                    var elementnamearray = data.elementname[kpiid];
                                    var forloopcount = 0;
                                    for (forloopcount = 0; forloopcount < elementnamearray.length; forloopcount++) {
                                        $('<tr id="firsttable_body_tr_' + kpiid + '_' + forloopcount + '"></tr>').appendTo('#firsttable_body_' + i + '');
                                        $('<td class="kpi_lement_name kpi_lement_name">' + data.elementweightage[kpiid][forloopcount] + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                        $('<td class="kpi_weightage kpi_lement_number">' + data.elementname[kpiid][forloopcount] + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                        $.each(data.listofships, function (j) {
                                            var shipid = data.listofships[j]['id']
                                            var elementvalue = data.elementvalues_ship[shipid][valuecount]
                                            if (elementvalue != null) {
                                                $('<td class="kpi_ship kpi_lement_inputname">' + elementvalue + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                            }
                                            else {
                                                $('<td class="kpi_ship kpi_lement_inputname"></td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                            }

                                        });
                                        valuecount++;
                                    }
                                });


                                if (linkid == 'proviousmonth_data') {
                                    $('#currentid_data').text(month + '-' + year);
                                    $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                    $('#currentid').text(month + '-' + year);
                                    $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                }
                                else {
                                    $('#currentid').text(month + '-' + year);
                                    $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                    $('#currentid_data').text(month + '-' + year);
                                    $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                }
                                $('#kpiformforship').hide();
                                $('#currentmonhthdetails').hide();
                                $('#previousmonthdata').show();
                            }
                            else {
                                $('#allbuttondiv').show();
                                $('#kpiformforship').show();
                                $('#previousmonthdata').hide();
                                $('#currentmonhthdetails').show();
                                $('#overallshids').html('');
                                $('#overallshids').text('');
                                $('<div class="views_kpi_name_total"><span>Vessels (' + data.shipcount + ')</span></div>').appendTo('#overallshids');
                                $('<div class="views_kpi_form_list_main"> <ui id="addshipids"></ui></div>').appendTo('#overallshids');
                                var shipstatus = 0
                                $.each(data.listofships, function (i) {
                                    var status = data.status_ship[i];


                                    $('<li><a class="linkclass" title="' + data.listofships[i]['shipName'] + '" id="' + data.listofships[i]['id'] + '" >' + data.listofships[i]['shipName'] + '</a></li>').appendTo('#addshipids');
                                    if (role == 'ROLE_ADMIN') {
                                        if (status == 3) {
                                            $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                            shipstatus++;
                                        }
                                    }
                                    else if (role == 'ROLE_MANAGER') {
                                        if (status == 2) {
                                            $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                            shipstatus++;
                                        }
                                    }
                                    else if (role == 'ROLE_KPI_INFO_PROVIDER') {
                                        if (status == 1) {
                                            $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                            shipstatus++;
                                        }
                                    }

                                });
                                $('#elementformid').html('');
                                $('#elementformid').text('');
                                $('#shipname').text(data.currentshipname);
                                $('#currentid').text(month + '-' + year);
                                $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                $('<div id="addkpiformid" class="table-responsive"></div>').appendTo('#elementformid');
                                if (data.shipcount != shipstatus) {
                                    $('#shipid').val(data.currentshipid);
                                    $('.linkclass').removeClass("active");
                                    $('#' + data.currentshipid).addClass('active');
                                    var j = 1;
                                    var newtemp = 0;
                                    $.each(data.elementkpiarray, function (i, listkpi) {

                                        var k = $.isNumeric(i);
                                        if (!k) {
                                            var temp = 1;

                                            $('<table class="table kpi_table_form_section"><thead><tr id="firstheader_tr_' + newtemp + '"></tr></thead> <tbody id="tablebody' + j + '">').appendTo('#addkpiformid');
                                            {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                            $('<th><input type="checkbox" class="checkboxes" name= "reject_id[]" value="'+data.kpi_details[j-1]['id']+'"></th>').appendTo('#firstheader_tr_' + newtemp);
                                            {% endif %}
                                            $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                            if (newtemp == 0) {
                                                $(' <th class="kpi_value">Wt</th><th class="kpi_value">Symbol</th><th class="kpi_value">Indication</th><th class="kpi_value">Value</th>').appendTo('#firstheader_tr_' + newtemp)
                                            }
                                            else {
                                                $(' <th></th><th></th><th></th><th></th>').appendTo('#firstheader_tr_' + newtemp)
                                            }
                                            $.each(listkpi, function (mykey, myvalue) {
                                                $('<tr id="' + j + 'tr_id_' + temp + '"></tr>').appendTo("#tablebody" + j);
                                                {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                $('<td>&nbsp;</td>').appendTo("#" + j + "tr_id_" + temp);
                                                {% endif %}

                                                if (data.elementvalues.length > 0) {

                                                    $('#updatebuttonid').show();
                                                    $('#savebuttonid').hide();
                                                    $('#adminbuttonid').show();

                                                    if (temp == 1) {
                                                        $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" onkeypress="return isNumberKey(event)"  value="' + data.elementvalues[newtemp] + '" type="text" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                    }
                                                    if (temp > 1) {
                                                        $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" onkeypress="return isNumberKey(event)" value="' + data.elementvalues[newtemp] + '" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                    }
                                                }
                                                else {
                                                    $('#updatebuttonid').hide();
                                                    $('#savebuttonid').show();
                                                    $('#adminbuttonid').show();
                                                    if (temp == 1) {
                                                        $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td>  <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" required onkeypress="return isNumberKey(event)" ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                    }
                                                    if (temp > 1) {
                                                        $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" type="text" placeholder="123"  onkeypress="return isNumberKey(event)" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                    }
                                                }
                                                temp++;
                                                newtemp++;
                                            });
                                            $(' </tr></tbody></table>').appendTo('#addkpiformid');
                                        }
                                        j++;
                                    });
                                }
                                else {
                                    $('<span id="spanallid">All Ships Data Upload.</span>').appendTo('#elementformid');
                                    $('#allbuttondiv').hide();
                                }
                            }
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            $('#resultLoading .bg').height('100%');
                            $('#resultLoading').fadeOut(300);
                            $('body').css('cursor', 'default');
                            window.location.href = base_url + '/login';
                        }
                    });

                });
                /*------------------------------------- Previous Month Dataview Ends Here-------------------------------------------- */
                /*------------------------------------- Next Month Dataview Starts Here-------------------------------------------- */
                $('.nextmonth').live('click', function ($e) {
                    $e.preventDefault();
                    var linkid = $(this).attr('id');
                    if (linkid == 'proviousmonth_data') {

                        var currentdate = new Date($('#datofmonthid_data').val());
                    }
                    else {
                        var currentdate = new Date($('#datofmonthid').val());
                    }
                    currentdate.setMonth(currentdate.getMonth() + 1);
                    currentdate, locale = "en-us",
                            month = currentdate.toLocaleString(locale, {month: "long"}),
                            year = currentdate.getFullYear();
                    var nowdate = new Date();
                    if (currentdate <= nowdate) {
                        var current = month + '-' + year;
                        var data = {
                            dataofmonth: current
                        };

                        $.ajaxSetup({
                            global: false,
                            type: "post",
                            'url': Routing.generate('prev_month_change_scorecard'),
                            beforeSend: function () {
                                var beforsend = ajaxbefore_send();
                            },
                            complete: function () {
                                var complete = ajax_complete();
                            }
                        });
                        $.ajax({
                            data: data,
                            success: function (data) {
                                if (data.commontext == true) {
                                    $('#prvieoustablecontent').html(' ');
                                    $('#prvieoustablecontent').text(' ');
                                    var addcolumn = 0;
                                    var valuecount = 0;
                                    $('<table id="table_id_" class="table verfication_ranking_table_form_section"></table>').appendTo('#prvieoustablecontent');
                                    $('<thead id="firsttable_head_"></thead><tbody id="firsttable_body_"></tbody>').appendTo('#table_id_');
                                    $('<tr class="v_r_min_height" id="firsttable_head_tr_"></tr>').appendTo('#firsttable_head_');
                                    $('<th class="kpi_lement_name"></th><th class="kpi_weightage"><div class="verfication_ranking_text_rotation_2">Weightage</div></th>').appendTo('#firsttable_head_tr_');
                                    $.each(data.listofships, function (j) {
                                        $('<th class="kpi_ship "><div class="verfication_ranking_text_rotation_2">' + data.listofships[j]['shipName'] + '</div></th>').appendTo('#firsttable_head_tr_');
                                    });
                                    $.each(data.rankingKpiList, function (i) {

                                        var colspan = data.shipcount + 2;
                                        $('<table id="table_id_' + i + '" class="table verfication_ranking_table_form_section"></table>').appendTo('#prvieoustablecontent');
                                        $('<thead id="firsttable_head_' + i + '"></thead><tbody id="firsttable_body_' + i + '"></tbody>').appendTo('#table_id_' + i);
                                        $('<tr id="firsttable_head_tr_' + i + '"></tr>').appendTo('#firsttable_head_' + i);
                                        $('<th colspan="' + colspan + '" class="kpi_lement_name">' + data.rankingKpiList[i]['kpiName'] + '</th>').appendTo('#firsttable_head_tr_' + i);
                                        var kpiid = data.rankingKpiList[i]['id'];
                                        var elementnamearray = data.elementname[kpiid];
                                        var forloopcount = 0;
                                        for (forloopcount = 0; forloopcount < elementnamearray.length; forloopcount++) {
                                            $('<tr id="firsttable_body_tr_' + kpiid + '_' + forloopcount + '"></tr>').appendTo('#firsttable_body_' + i + '');
                                            $('<td class="kpi_lement_name kpi_lement_name">' + data.elementweightage[kpiid][forloopcount] + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                            $('<td class="kpi_weightage kpi_lement_number">' + data.elementname[kpiid][forloopcount] + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                            $.each(data.listofships, function (j) {
                                                var shipid = data.listofships[j]['id']
                                                var elementvalue = data.elementvalues_ship[shipid][valuecount]
                                                if (elementvalue != null) {
                                                    $('<td class="kpi_ship kpi_lement_inputname">' + elementvalue + '</td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                                }
                                                else {
                                                    $('<td class="kpi_ship kpi_lement_inputname"></td>').appendTo('#firsttable_body_tr_' + kpiid + '_' + forloopcount + '');
                                                }

                                            });
                                            valuecount++;
                                        }
                                    });


                                    if (linkid == 'proviousmonth_data') {
                                        $('#currentid_data').text(month + '-' + year);
                                        $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                        $('#currentid').text(month + '-' + year);
                                        $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                    }
                                    else {
                                        $('#currentid').text(month + '-' + year);
                                        $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                        $('#currentid_data').text(month + '-' + year);
                                        $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                    }
                                    $('#kpiformforship').hide();
                                    $('#currentmonhthdetails').hide();
                                    $('#previousmonthdata').show();
                                }
                                else {
                                    $('#overallshids').html('');
                                    $('#overallshids').text('');
                                    $('#previousmonthdata').hide();
                                    $('#kpiformforship').show();
                                    $('#currentmonhthdetails').show();
                                    $('#allbuttondiv').show();
                                    $('<div class="views_kpi_name_total"><span>Vessels (' + data.shipcount + ')</span></div>').appendTo('#overallshids');
                                    $('<div class="views_kpi_form_list_main"> <ui id="addshipids"></ui></div>').appendTo('#overallshids');
                                    var shipstatus = 0
                                    $.each(data.listofships, function (i) {
                                        var status = data.status_ship[i];


                                        $('<li><a class="linkclass" title="' + data.listofships[i]['shipName'] + '" id="' + data.listofships[i]['id'] + '" >' + data.listofships[i]['shipName'] + '</a></li>').appendTo('#addshipids');
                                        if (role == 'ROLE_ADMIN') {
                                            if (status == 3) {
                                                $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                                shipstatus++;
                                            }
                                        }
                                        else if (role == 'ROLE_MANAGER') {
                                            if (status == 2) {
                                                $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                                shipstatus++;
                                            }
                                        }
                                        else if (role == 'ROLE_KPI_INFO_PROVIDER') {
                                            if (status == 1) {
                                                $('#' + data.listofships[i]['id']).after('<img src="/images/tick_icon.png">');
                                                shipstatus++;
                                            }
                                        }
                                    });
                                    $('#elementformid').html('');
                                    $('#elementformid').text('');
                                    $('#shipname').text(data.currentshipname);
                                    $('#currentid').text(month + '-' + year);
                                    $('#datofmonthid').val(year + '-' + month + '-' + currentdate.getDate());
                                    $('#datofmonthid_data').val(year + '-' + month + '-' + currentdate.getDate());
                                    $('<div id="addkpiformid" class="table-responsive"></div>').appendTo('#elementformid');
                                    //alert(data.shipstatusstring)
                                    if (data.shipcount != shipstatus) {
                                        $('#shipid').val(data.currentshipid);
                                        $('.linkclass').removeClass("active");
                                        $('#' + data.currentshipid).addClass('active');
                                        var j = 1;
                                        var newtemp = 0;
                                        $.each(data.elementkpiarray, function (i, listkpi) {

                                            var k = $.isNumeric(i);
                                            if (!k) {
                                                var temp = 1;

                                                $('<table class="table kpi_table_form_section"><thead><tr id="firstheader_tr_' + newtemp + '"></tr></thead> <tbody id="tablebody' + j + '">').appendTo('#addkpiformid');
                                                {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                $('<th><input type="checkbox" class="checkboxes" name= "reject_id[]" value="'+data.kpi_details[j-1]['id']+'"></th>').appendTo('#firstheader_tr_' + newtemp);
                                                {% endif %}
                                                $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                                if (newtemp == 0) {
                                                    $(' <th class="kpi_value">Wt</th><th class="kpi_value">Symbol</th><th class="kpi_value">Indication</th><th class="kpi_value">Value</th>').appendTo('#firstheader_tr_' + newtemp)
                                                }
                                                else {
                                                    $(' <th></th><th></th><th></th><th></th>').appendTo('#firstheader_tr_' + newtemp)
                                                }
                                                $.each(listkpi, function (mykey, myvalue) {
                                                    $('<tr id="' + j + 'tr_id_' + temp + '"></tr>').appendTo("#tablebody" + j);
                                                    {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                    $('<td>&nbsp;</td>').appendTo("#" + j + "tr_id_" + temp);
                                                    {% endif %}
                                                    if (data.elementvalues.length > 0) {

                                                        $('#updatebuttonid').show();
                                                        $('#savebuttonid').hide();
                                                        $('#adminbuttonid').show();

                                                        if (temp == 1) {
                                                            $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" onkeypress="return isNumberKey(event)"  value="' + data.elementvalues[newtemp] + '" type="text" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                        }
                                                        if (temp > 1) {
                                                            $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" onkeypress="return isNumberKey(event)" value="' + data.elementvalues[newtemp] + '" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                        }
                                                    }
                                                    else {
                                                        $('#updatebuttonid').hide();
                                                        $('#savebuttonid').show();
                                                        $('#adminbuttonid').show();
                                                        if (temp == 1) {
                                                            $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td>  <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" required onkeypress="return isNumberKey(event)" ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                        }
                                                        if (temp > 1) {
                                                            $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" type="text" placeholder="123"  onkeypress="return isNumberKey(event)" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                        }
                                                    }
                                                    temp++;
                                                    newtemp++;
                                                });
                                                $(' </tr></tbody></table>').appendTo('#addkpiformid');
                                            }
                                            j++;
                                        });
                                    }
                                    else {
                                        $('<span id="spanallid">All Ships Data Upload.</span>').appendTo('#elementformid');
                                        $('#allbuttondiv').hide();
                                    }
                                }
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                $('#resultLoading .bg').height('100%');
                                $('#resultLoading').fadeOut(300);
                                $('body').css('cursor', 'default');
                                window.location.href = base_url + '/login';
                            }
                        });
                    }
                    else {
                        $('#spantext').text('Date Exceed...');
                        $('#spantext').show();
                        setTimeout(function () {
                            $('#spantext').fadeOut('fast');
                        }, 4000)
                    }alue="'+j+'"
                });
                /*------------------------------------- Next Month Dataview Starts Here-------------------------------------------- */
                /*------------------------------------- Induvial Ships Dataview Starts Here-------------------------------------------- */
                $('.linkclass').live('click', function () {

                    var linkid = $(this).attr('id');
                    var shipname = $(this).attr('title');
                    $('#shipid').val('');

                    $('#addkpiformid').html('');
                    $('#addkpiformid').text('');
                    $('#shipname').text(' ');
                    var dataofmonth = $('#currentid').text();
                    $.ajaxSetup({
                        global: false,
                        type: "post",
                        'url': Routing.generate('shipskpielment', {'shipid': linkid, 'monthdetail': dataofmonth}),
                        beforeSend: function () {
                            var beforsend = ajaxbefore_send();
                        },
                        complete: function () {
                            var complete = ajax_complete();
                        }
                    });

                    $.ajax({
                        success: function (data) {
                            var valuearray = data.elementvalues;
                            $('#shipid').val(linkid);
                            $('#shipname').text(shipname);
                            $('#nogroupselected').hide();
                            $('#kpiformforship').show();
                            $('.linkclass').removeClass("active");
                            $('#' + linkid).addClass('active');
                            var j = 1;
                            var newtemp = 0;

                            $.each(data.kpiNameArray, function (i, listkpi) {
                                var k = $.isNumeric(i);
                                if (!k) {
                                    var temp = 1;

                                    $('<table class="table kpi_table_form_section"><thead><tr id="firstheader_tr_' + newtemp + '"></tr></thead> <tbody id="tablebody' + j + '">').appendTo('#addkpiformid');
                                    {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                    $('<th><input type="checkbox" class="checkboxes" name= "reject_id[]" value="'+data.kpi_details[j-1]['id']+'"></th>').appendTo('#firstheader_tr_' + newtemp);
                                    {% endif %}
                                    var rejection_status = 0;
                                    if(data.rejection_status == 'yes') {
                                        {% if  is_granted("ROLE_KPI_INFO_PROVIDER") %}
                                            if(data.rejections  == 'ALL') {
                                                rejection_status = 1;
                                            } else {
                                                $.each(data.rejections, function(i,kpi_id) {
                                                    if(kpi_id==data.kpi_details[j-1]['id']) {
                                                        rejection_status = 1;
                                                    }
                                                });
                                            }
                                            if(rejection_status == 1) {
                                                $('<th style="color: red">' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                            } else {
                                                $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                            }
                                        {% else %}
                                            $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                        {% endif %}
                                    } else {
                                        $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                    }

                                    if (newtemp == 0) {
                                        $(' <th class="kpi_value">Wt</th><th class="kpi_value">Symbol</th><th class="kpi_value">Indication</th><th class="kpi_value">Value</th>').appendTo('#firstheader_tr_' + newtemp)
                                    }
                                    else {
                                        $(' <th></th><th></th><th></th><th></th>').appendTo('#firstheader_tr_' + newtemp);
                                    }
                                    $.each(listkpi, function (mykey, myvalue) {
                                        $('<tr id="' + j + 'tr_id_' + temp + '"></tr>').appendTo("#tablebody" + j);
                                        {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                        $('<td>&nbsp;</td>').appendTo("#" + j + "tr_id_" + temp);
                                        {% endif %}
                                        if (valuearray.length > 0) {
                                            $('#updatebuttonid').show();
                                            $('#savebuttonid').hide();
                                            $('#adminbuttonid').show();

                                            if (temp == 1) {
                                                $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" onkeypress="return isNumberKey(event)"  value="' + data.elementvalues[newtemp] + '" type="text" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                            }
                                            if (temp > 1) {
                                                $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" onkeypress="return isNumberKey(event)" value="' + data.elementvalues[newtemp] + '" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                            }
                                        }
                                        else {
                                            $('#updatebuttonid').hide();
                                            $('#savebuttonid').show();
                                            $('#adminbuttonid').show();
                                            if (temp == 1) {
                                                $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td>  <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" required onkeypress="return isNumberKey(event)" ></td>').appendTo("#" + j + "tr_id_" + temp);
                                            }
                                            if (temp > 1) {
                                                $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" type="text" placeholder="123"  onkeypress="return isNumberKey(event)" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                            }
                                        }
                                        temp++;
                                        newtemp++;

                                    });
                                    $(' </tr></tbody></table>').appendTo('#addkpiformid');
                                }
                                j++;

                            });
                            $('#allbuttondiv').show();
                        },
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                            window.location.href = base_url + '/login';
                        }
                    });

                });
                /*------------------------------------- Induvial Ships Dataview Ends Here-------------------------------------------- */
                /*-------------------------------------Text Box Validation Starts Here-------------------------------------------- */
                $(".textbox").live("keypress keyup blur", function (event) {
                    //this.value = this.value.replace(/[^0-9\.]/g,'');
                    $(this).val($(this).val().replace(/[^0-9\.]/g, ''));
                    if ((event.which != 46 || $(this).val().indexOf('.') != -1) && (event.which < 48 || event.which > 57)) {
                        event.preventDefault();
                    }
                });

                function isNumber(evt, element) {

                    var charCode = (evt.which) ? evt.which : event.keyCode

                    if (
                            (charCode != 45 || $(element).val().indexOf('-') != -1) &&      // â€œ-â€ CHECK MINUS, AND ONLY ONE.
                            (charCode != 46 || $(element).val().indexOf('.') != -1) &&      // â€œ.â€ CHECK DOT, AND ONLY ONE.
                            (charCode < 48 || charCode > 57))
                        return false;

                    return true;
                }

                /*-------------------------------------Text Box Validation Ends Here-------------------------------------------- */
                /*-------------------------------------Reset form values Starts Here-------------------------------------------- */
                $('#resetbuttonid').click(function ($e) {
                    $e.preventDefault();
                    $('.resetclass').val(' ');
                });
                /*-------------------------------------Reset form values Ends Here-------------------------------------------- */
                /*-------------------------------------Insertion Process Starts Here-------------------------------------------- */

                $(".addclasskpivalue").live('click', function ($e) {
                    $e.preventDefault();
                    var validationStatusField = false;
                    if ($(this).attr('id') == 'upload_btn_id' || $(this).attr('id') == 'savebuttonid' || $(this).attr('id') == 'updatebuttonid') {
                        validationStatusField = true;
                    } else {
                        $("input[name='newelemetvalues[]']").each(function () {
                            var elementvalue = $(this).val();
                            if (elementvalue == "") {
                                validationStatusField = false;
                                $(this).focus();
                                alert("Please fil out this field");
                                return false;
                            }
                            else {
                                validationStatusField = true;
                                return true;
                            }
                        });
                    }

                    if (validationStatusField == true) {
                        var preshipid = $('#shipid').val();
                        var btn = $(this).attr('id');
                        var formid = $('#kpiform');
                        $.ajaxSetup({
                            global: false,
                            type: "post",
                            'url': Routing.generate('addkpivaluesname', {'buttonid': btn}),
                            data: formid.serialize(),
                            beforeSend: function () {
                                var beforsend = ajaxbefore_send();
                            },
                            complete: function () {
                                var complete = ajax_complete();
                            }
                        });

                        $.ajax({
                            success: function (data) {
                                if(data.status == -1) {
                                    $('#img_' + data.ship_id ).remove();
                                    $('#' + data.ship_id).after('<img id="img_'+data.ship_id+'" style="width: 20px;height: 20px" src="/images/error.png">');
                                    $('#addkpiformid').text(data.return_msg);
                                } else {
                                    $('#datofmonthid').val(data.currentdatetime);
                                    $('#datofmonthid_data').val(data.currentdatetime);
                                    var valuearray = data.elementvalues;
                                    $('#shipid').val('');
                                    $('#addkpiformid').html('');
                                    $('#addkpiformid').text('');
                                    $('#shipname').text(' ');

                                    if (data.shipid != 0) {
                                        $('#nogroupselected').hide();
                                        $('#kpiformforship').show();
                                        if (data.shipcount == data.ship_status_done_count) {
                                            $('#upload_btn_id').show();
                                        } else if (data.ship_status_done_count == -1) {
                                            $('.linkclass').removeClass("active");
                                            $('<span id="spanallid">All Ships Data Uploaded.</span>').appendTo('#elementformid');
                                        } else {

                                            $('#shipid').val(data.shipid);
                                            $('#shipname').text(data.shipname);
                                            $('.linkclass').removeClass("active");
                                            $('#' + data.shipid).addClass('active');

                                            var j = 1;
                                            var newtemp = 0;
                                            $.each(data.kpiNameArray, function (i, listkpi) {

                                                var k = $.isNumeric(i);
                                                if (!k) {
                                                    var temp = 1;

                                                    $('<table class="table kpi_table_form_section"><thead><tr id="firstheader_tr_' + newtemp + '"></tr></thead> <tbody id="tablebody' + j + '">').appendTo('#addkpiformid');
                                                    {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                    $('<th><input type="checkbox" class="checkboxes" name= "reject_id[]" value="'+data.kpi_details[j-1]['id']+'"></th>').appendTo('#firstheader_tr_' + newtemp);
                                                    {% endif %}
                                                    $('<th >' + i + '</th>').appendTo('#firstheader_tr_' + newtemp);
                                                    if (newtemp == 0) {
                                                        $(' <th class="kpi_value">Wt</th><th class="kpi_value">Symbol</th><th class="kpi_value">Indication</th><th class="kpi_value">Value</th>').appendTo('#firstheader_tr_' + newtemp)
                                                    }
                                                    else {
                                                        $(' <th></th><th></th><th></th><th></th>').appendTo('#firstheader_tr_' + newtemp)
                                                    }
                                                    $.each(listkpi, function (mykey, myvalue) {
                                                        $('<tr id="' + j + 'tr_id_' + temp + '"></tr>').appendTo("#tablebody" + j);
                                                        {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                        $('<td>&nbsp;</td>').appendTo("#" + j + "tr_id_" + temp);
                                                        {% endif %}
                                                        if (valuearray.length > 0) {
                                                            $('#updatebuttonid').show();
                                                            $('#savebuttonid').hide();
                                                            $('#adminbuttonid').show();
                                                            if (temp == 1) {
                                                                $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td> <td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td><td class="kpi_lement_inputname"><input class="resetclass" value="' + data.elementvalues[newtemp] + '" placeholder="123" type="text" name="newelemetvalues[]" required></td>').appendTo("#" + j + "tr_id_" + temp);
                                                            }
                                                            if (temp > 1) {
                                                                $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" type="text" placeholder="123" value="' + data.elementvalues[newtemp] + '" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                            }
                                                        }
                                                        else {
                                                            $('#updatebuttonid').hide();
                                                            $('#savebuttonid').show();
                                                            $('#adminbuttonid').show();
                                                            if (temp == 1) {
                                                                $('<td  class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" placeholder="123" type="text" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                            }
                                                            if (temp > 1) {
                                                                $('<td class="kpi_lement_name">' + myvalue + '</td><td class="kpi_lement_number">' + data.elementweightage[newtemp] + '</td><td class="kpi_lement_inputname">' + data.symbolIndication[newtemp] + '</td><td class="kpi_lement_inputname">' + data.indicationValue[newtemp] + '</td> <td class="kpi_lement_inputname"><input class="resetclass" type="text" placeholder="123" name="newelemetvalues[]" required ></td>').appendTo("#" + j + "tr_id_" + temp);
                                                            }
                                                        }
                                                        newtemp++;
                                                        temp++;
                                                    });
                                                    $(' </tbody></table>').appendTo('#addkpiformid');
                                                }
                                                j++;
                                            });
                                        }
                                        jAlert('', data.returnmsg);
                                    }
                                    else {
                                        $('#shipid').val(' ');
                                        $('#shipname').text(' ');
                                        $('#nogroupselected').show();
                                        $('#kpiformforship').hide();
                                        jAlert('', data.returnmsg);
                                    }

                                    if(data.ship_status_done_count == data.shipcount) {
                                        $('#allbuttondiv').hide();
                                        $('.linkclass').removeClass("active");
                                        $('#img_' + preshipid ).remove();
                                        $('#' + preshipid).after('<img id="img_'+preshipid+'" src="/images/tick_icon.png">');
                                        $('#addkpiformid').text('All vessels data updated !');
                                        $('<div class="actions_submit"><button style="margin: 0px 0px 0px 600px" class="submit_btn addclasskpivalue" id="upload_btn_id" value="Submit">{{ 'dataverification.upload'|trans }}</button></div>').appendTo('#addkpiformid');
                                    } else {
                                        $('#' + preshipid).after('<img id="img_'+preshipid+'" src="/images/tick_icon.png">');
                                    }
                                }

                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                 window.location.href = base_url+'/login';
                            }
                        });

                    }
                });

                /*-------------------------------------Insertion Process Ends Here-------------------------------------------- */

            });
            /*-------------------------------------Text Box Validation Use Javascript Starts Here-------------------------------------------- */

            function isNumberKey(e) {
                if (e.which != 46 && e.which != 45 && e.which != 46 && !(e.which >= 48 && e.which <= 57)) {
                    return false;
                }
            }
            /*-------------------------------------Text Box Validation Use Javascript Ends Here-------------------------------------------- */

        </script>

    {% endblock %}


    <section id="currentmonhthdetails">
        <div class="col-sm-3 views_kpi_form_list" id="overallshids">
            <div class="views_kpi_name_total"><span>{{ 'dashboard.shipname'|trans }} ({{ shipcount }})</span></div>
            <div class="views_kpi_form_list_main">
                <ui>

                    {% set j=0 %}
                    {% for shipobject in listofships %}
                        <li>
                            <a class="linkclass" title="{{ shipobject.shipName }}"
                               id="{{ shipobject.id }}">{{ shipobject.shipName }}</a>
                            {% if  is_granted("ROLE_KPI_INFO_PROVIDER") %}
                                {% if rejection_status == 'yes' %}
                                    {% if shipobject.id in rejections|keys %}
                                        <img id="img_{{ shipobject.id }}" style="width: 20px;height: 20px" src="/images/error.png">
                                        {% set j=j+1 %}
                                    {% else %}
                                        <img id="img_{{ shipobject.id }}" src="/images/tick_icon.png">
                                        {% set j=j+1 %}
                                    {% endif %}
                                {% else %}
                                    {% if status_ship[j]==1 and rejection_status == 'empty'  %}
                                        <img id="img_{{ shipobject.id }}" src="/images/tick_icon.png">
                                        {% set j=j+1 %}
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                            {% if  is_granted("ROLE_ADMIN") %}
                                {% if status_ship[j]==3 %}
                                    <img id="img_{{ shipobject.id }}" src="/images/tick_icon.png">
                                    {% set j=j+1 %}
                                {% endif %}
                            {% endif %}
                            {% if is_granted("ROLE_MANAGER") %}
                                {% if status_ship[j]==2 %}
                                    <img id="img_{{ shipobject.id }}" src="/images/tick_icon.png">
                                    {% set j=j+1 %}
                                {% endif %}
                            {% endif %}
                        </li>
                    {% endfor %}
                </ui>
            </div>

        </div>
    </section>

    <section id="nogroupselected">
        <div class="col-sm-8 col-md-offset-6 no_user_selected_views">
            <div class="text_image">
                <img src="/images/no-user.png">
                <label>{{ 'dataverification.noship'|trans }} </label>
            </div>
        </div>
    </section>

    <section id="kpiformforship">
        <div class="col-sm-12">
            <div class="add_new_kpi_form_screen">
                {% if elementkpiarray|length > 0 %}
                <form id="kpiform" class="form-horizontal no-style">
                    <div class="add_new_kpi_top_title">
                        <div class="title_month">
                            <label class="title"> <span id="shipname"> </span></label>
                            <span id="spantext" class="errormsg">March-2016</span>
                            <label class="toolbar-title">

                                <a id="proviousmonth" class="left-arrow ss-navigateleft prevmonth">&nbsp;</a>
                                <span id="currentid" class="item">March-2016</span>
                                <input type="hidden" name="dataofmonth" id="datofmonthid">
                                <a id="nextmonth" class="right-arrow ss-navigateright nextmonth">&nbsp;</a>
                            </label>
                        </div>
                    </div>
                    {% endif %}

                    <div id="elementformid" class="add_new_kpi_form_section">
                        {% if elementkpiarray|length <= 0 %}
                            No Kpi Found
                        {% endif %}
                        {% if elementkpiarray|length > 0 %}
                        <div id="addkpiformid" class="table-responsive">
                            {% if j==shipcount %}
                                <span>All vessels data saved !</span>
                                <div class="actions_submit">
                                    {% if  is_granted("ROLE_KPI_INFO_PROVIDER") %}
                                        <button style="margin: 0px 0px 0px 600px" class="submit_btn addclasskpivalue" id="upload_btn_id" value="Submit">
                                            {{ 'dataverification.upload'|trans }}
                                        </button>
                                    {% endif %}
                                </div>
                            {% else %}
                                {% set i=0 %}
                                {% set kpi_count=0 %}
                                {% for key, value in elementkpiarray %}
                                    <table class="table kpi_table_form_section">
                                        <thead>
                                        <tr>
                                            {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                <th>
                                                    <input type="checkbox" class="checkboxes" name="reject_id[]" value={{ kpi_details[kpi_count]['id'] }}>
                                                </th>
                                            {% endif %}
                                            <th class="kpi_lement_name"> {{ key }} </th>
                                            {% if i == 0 %}
                                                <th class="">Wt</th>
                                                <th class="kpi_value">Symbol</th>
                                                <th class="kpi_value">Indication</th>
                                                <th class="kpi_value">Value</th>
                                            {% else %}
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                            {% endif %}
                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% for user in value %}
                                            <tr>
                                                {% if  is_granted("ROLE_ADMIN") or is_granted("ROLE_MANAGER") %}
                                                    <td></td>
                                                {% endif %}
                                                <td class="kpi_lement_name">{{ user }}  </td>
                                                <td class="kpi_lement_number">{{ elementweightage[i] }}</td>
                                                <td class="kpi_lement_inputname"> {{ symbolIndication[i] }} </td>
                                                <td class="kpi_lement_inputname">{{ indicationValue[i] }}</td>
                                                <td class="kpi_lement_inputname">
                                                    {% if elementvalues|length <= 0 %}
                                                        <input class="resetclass" onkeypress="return isNumberKey(event)"
                                                               name="newelemetvalues[]" type="text" required
                                                               placeholder="123">
                                                    {% endif %}
                                                    {% if elementvalues|length > 0 and  elementvalues|length > i %}
                                                        <input class="resetclass" onkeypress="return isNumberKey(event)"
                                                               name="newelemetvalues[]" type="text"
                                                               value="{{ elementvalues[i] }}" required
                                                               placeholder="123">
                                                    {% endif %}
                                                </td>
                                            </tr>

                                            {% set i=i+1 %}

                                        {% endfor %}
                                        </tbody>
                                    </table>
                                    {% set kpi_count=kpi_count+1 %}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                <input type="hidden" name="shipid" id="shipid">
                    <div id="allbuttondiv" class="actions_submit">

                        {% if  is_granted("ROLE_KPI_INFO_PROVIDER") %}
                            <input type="submit" class="submit_btn addclasskpivalue" id="savebuttonid"
                                   value="{{ 'dataverification.save'|trans }}">
                            <input type="submit" class="submit_btn addclasskpivalue" id="updatebuttonid"
                                   value="{{ 'dataverification.update'|trans }}">
                            <button class="cancel_btn" id="resetbuttonid"
                                    value="Submit">{{ 'dataverification.reset'|trans }}</button>
                        {% endif %}
                        {% if  is_granted("ROLE_ADMIN") %}
                            <input type="submit" class="submit_btn addclasskpivalue" id="adminbuttonid"
                                   value="{{ 'dataverification.upload'|trans }}">
                            <input type="submit" class="submit_btn addclasskpivalue" id="reject_btn_id"
                                   value="{{ 'dataverification.reject'|trans }}">
                        {% endif %}

                        {% if is_granted("ROLE_MANAGER") %}
                            <input type="submit" class="submit_btn addclasskpivalue" id="verfiybuttonid"
                                   value="{{ 'dataverification.verfiy'|trans }}">
                            <input type="submit" class="submit_btn addclasskpivalue" id="reject_btn_id"
                                   value="{{ 'dataverification.reject'|trans }}">
                        {% endif %}
                    </div>
                    {% endif %}
                </form>
            </div>
        </div>
    </section>

    <section id="previousmonthdata">
        <div class="col-sm-12">
            <div class="verfication_ranking_form_screen">
                <form class="form-horizontal no-style">
                    <div class="add_new_kpi_top_title">
                        <div class="title_month">
                            <label class="title">&nbsp;</label>
                            <label class="toolbar-title">
                                <a id="proviousmonth_data" class="left-arrow ss-navigateleft prevmonth">&nbsp;</a>
                                <span id="currentid_data" class="item">March-2016</span>
                                <input type="hidden" name="dataofmonth_data" id="datofmonthid_data">
                                <a id="nextmonth_data" class="right-arrow ss-navigateright nextmonth">&nbsp;</a>
                            </label>
                        </div>
                    </div>

                    <div class="verfication_ranking_form_section">
                        <div id="prvieoustablecontent" class="">

                            <table class="table verfication_ranking_table_form_section">
                                <thead>
                                <tr>
                                    <th class="kpi_lement_name">Vessel performance</th>
                                    <th class="kpi_weightage">Weightage</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                    <th class="kpi_ship">Lorem</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="kpi_lement_name">Cargo hold & log readiness</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                <tr>
                                    <td class="kpi_lement_name">Hatch cover water tightness</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                <tr>
                                    <td class="kpi_lement_name">Cargo crane operation</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                </tbody>
                            </table>
                            <table class="table verfication_ranking_table_form_section">
                                <thead>
                                <tr>
                                    <th class="kpi_lement_name">Vessel performance</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td class="kpi_lement_name">Cargo hold & log readiness</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                <tr>
                                    <td class="kpi_lement_name">Hatch cover water tightness</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                <tr>
                                    <td class="kpi_lement_name">Cargo crane operation</td>
                                    <td class="kpi_lement_number">100</td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                    <td class="kpi_lement_inputname"><input type="text" placeholder="123"></td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

{% endblock %}